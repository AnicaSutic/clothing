{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\a.sutic\\\\React\\\\clothing\\\\src\\\\App.js\";\nimport React, { useEffect } from \"react\";\nimport \"./App.css\";\nimport HomePage from \"./pages/HomePage\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport ShopPage from \"./pages/ShopPage\";\nimport Header from \"./components/Header\";\nimport SignInUp from \"./pages/SIgn/SIgnInUp\";\nimport { connect } from \"react-redux\";\nimport { selectCurrentUser } from \"./redux/user/userSelector\";\nimport { createStructuredSelector } from \"reselect\";\nimport CheckoutPage from \"./pages/CheckoutPage\";\nimport { selectShopCollectionForPreview } from \"./redux/shop/shopSelector\";\nimport { checkUserSession } from \"./redux/user/userActions\";\n\nfunction App({\n  checkUserSession,\n  currentUser\n}) {\n  useEffect(() => {\n    checkUserSession();\n  }, []); // componentDidMount() {\n  //   const {checkUserSession} = this.props;\n  //   checkUserSession();\n  //const { setCurrentUser } = this.props;\n  // this is a metoh in auth library, param is what is user state\n  // this connection is always open and we need to close it in unmount\n  // this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n  //   if (userAuth) {\n  //     const userRef = await createUserProfileDoc(userAuth);\n  //     userRef.onSnapshot(snapshot => {\n  //       // this.setState({\n  //       //   currentUser: {\n  //       //     id: snapshot.id,\n  //       //     ...snapshot.data()\n  //       //   }\n  //       // }, () => {\n  //       //   console.log(this.state);\n  //       // });\n  //       setCurrentUser({\n  //         id: snapshot.id,\n  //         ...snapshot.data()\n  //       });\n  //     });\n  //   }\n  //   setCurrentUser(userAuth);\n  //   // we just wanted programmicaly to add data to dataabse now it is not necessary\n  //   //addCollectionsAndDoc('collections',collectionsArray.map(({title,items}) => ({title,items})));\n  //   // this.setState({\n  //   //   currentUser:user\n  //   // });\n  // });\n  // }\n  // componentWillUnmount() {\n  //   // to close subscription and connection\n  //   this.unsubscribeFromAuth();\n  // }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }), React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    component: HomePage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/shop\",\n    component: ShopPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/checkout\",\n    component: CheckoutPage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), React.createElement(Route, {\n    exact: true,\n    path: \"/sign\",\n    render: () => currentUser ? React.createElement(Redirect, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }) : React.createElement(SignInUp, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  })));\n}\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  collectionsArray: selectShopCollectionForPreview\n});\n\nconst mapDispatchToProps = dispatch => ({\n  checkUserSession: () => dispatch(checkUserSession())\n}); // saga is handling now\n// function mapDispatchToProps(dispatch) {\n//   return {\n//     setCurrentUser: user => {\n//       dispatch(setCurrentUser(user));\n//     }\n//   };\n// }\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["C:\\Users\\a.sutic\\React\\clothing\\src\\App.js"],"names":["React","useEffect","HomePage","Route","Switch","Redirect","ShopPage","Header","SignInUp","connect","selectCurrentUser","createStructuredSelector","CheckoutPage","selectShopCollectionForPreview","checkUserSession","App","currentUser","mapStateToProps","collectionsArray","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAO,WAAP;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,SAASC,KAAT,EAAgBC,MAAhB,EAAwBC,QAAxB,QAAwC,kBAAxC;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AAEA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,iBAAT,QAAkC,2BAAlC;AACA,SAASC,wBAAT,QAAyC,UAAzC;AACA,OAAOC,YAAP,MAAyB,sBAAzB;AACA,SAASC,8BAAT,QAA+C,2BAA/C;AACA,SAASC,gBAAT,QAAiC,0BAAjC;;AAEA,SAASC,GAAT,CAAa;AAACD,EAAAA,gBAAD;AAAmBE,EAAAA;AAAnB,CAAb,EAA8C;AAE5Cf,EAAAA,SAAS,CAAC,MAAM;AACda,IAAAA,gBAAgB;AACjB,GAFQ,EAEN,EAFM,CAAT,CAF4C,CAO5C;AACA;AACA;AACE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACF;AAEA;AACA;AACA;AACA;;AAGE,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAC,GAAlB;AAAsB,IAAA,SAAS,EAAEZ,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,OAAZ;AAAoB,IAAA,SAAS,EAAEI,QAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAC,WAAlB;AAA8B,IAAA,SAAS,EAAEM,YAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EAIE,oBAAC,KAAD;AACE,IAAA,KAAK,MADP;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,MAAM,EAAE,MACNI,WAAW,GAAG,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAH,GAAyB,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CAFF,CADF;AAiBD;;AAIH,MAAMC,eAAe,GAAGN,wBAAwB,CAAC;AAC/CK,EAAAA,WAAW,EAAEN,iBADkC;AAE/CQ,EAAAA,gBAAgB,EAAEL;AAF6B,CAAD,CAAhD;;AAKA,MAAMM,kBAAkB,GAAGC,QAAQ,KAAK;AACtCN,EAAAA,gBAAgB,EAAG,MAAMM,QAAQ,CAACN,gBAAgB,EAAjB;AADK,CAAL,CAAnC,C,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAeL,OAAO,CACpBQ,eADoB,EAEpBE,kBAFoB,CAAP,CAGbJ,GAHa,CAAf","sourcesContent":["import React, {useEffect} from \"react\";\nimport \"./App.css\";\nimport HomePage from \"./pages/HomePage\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport ShopPage from \"./pages/ShopPage\";\nimport Header from \"./components/Header\";\nimport SignInUp from \"./pages/SIgn/SIgnInUp\";\n\nimport { connect } from \"react-redux\";\nimport { selectCurrentUser } from \"./redux/user/userSelector\";\nimport { createStructuredSelector } from \"reselect\";\nimport CheckoutPage from \"./pages/CheckoutPage\";\nimport { selectShopCollectionForPreview } from \"./redux/shop/shopSelector\";\nimport { checkUserSession } from \"./redux/user/userActions\";\n\nfunction App({checkUserSession, currentUser}) {\n\n  useEffect(() => {\n    checkUserSession()\n  }, [])\n\n\n  // componentDidMount() {\n  //   const {checkUserSession} = this.props;\n  //   checkUserSession();\n    //const { setCurrentUser } = this.props;\n    // this is a metoh in auth library, param is what is user state\n    // this connection is always open and we need to close it in unmount\n    // this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\n    //   if (userAuth) {\n    //     const userRef = await createUserProfileDoc(userAuth);\n    //     userRef.onSnapshot(snapshot => {\n    //       // this.setState({\n    //       //   currentUser: {\n    //       //     id: snapshot.id,\n    //       //     ...snapshot.data()\n    //       //   }\n    //       // }, () => {\n    //       //   console.log(this.state);\n    //       // });\n    //       setCurrentUser({\n    //         id: snapshot.id,\n    //         ...snapshot.data()\n    //       });\n    //     });\n    //   }\n\n    //   setCurrentUser(userAuth);\n    //   // we just wanted programmicaly to add data to dataabse now it is not necessary\n    //   //addCollectionsAndDoc('collections',collectionsArray.map(({title,items}) => ({title,items})));\n\n    //   // this.setState({\n    //   //   currentUser:user\n    //   // });\n    // });\n  // }\n\n  // componentWillUnmount() {\n  //   // to close subscription and connection\n  //   this.unsubscribeFromAuth();\n  // }\n\n\n    return (\n      <div>\n        <Header />\n        <Switch>\n          <Route exact path=\"/\" component={HomePage} />\n          <Route path=\"/shop\" component={ShopPage} />\n          <Route exact path=\"/checkout\" component={CheckoutPage} />\n          <Route\n            exact\n            path=\"/sign\"\n            render={() =>\n              currentUser ? <Redirect to=\"/\" /> : <SignInUp />\n            }\n          />\n        </Switch>\n      </div>\n    );\n  }\n\n\n\nconst mapStateToProps = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  collectionsArray: selectShopCollectionForPreview\n});\n\nconst mapDispatchToProps = dispatch => ({\n  checkUserSession : () => dispatch(checkUserSession())\n})\n\n// saga is handling now\n// function mapDispatchToProps(dispatch) {\n//   return {\n//     setCurrentUser: user => {\n//       dispatch(setCurrentUser(user));\n//     }\n//   };\n// }\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);\n"]},"metadata":{},"sourceType":"module"}